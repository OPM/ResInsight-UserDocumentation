<h2>Search for: <span id="search-title"></span></h2>
<form action="{{ relref . "search.md" }}" method="GET" id="search-form">
    <input type="search" name="q" id="search-field" placeholder="Search">
</form>

<div id="search-results">
</div>
<div class="clear"></div>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="{{ relref . "_index.md" }}js/lunr.min.js"></script>
<script>
    window.store = [];
    {{ range .Site.AllPages }}
        {{ if not (eq .Title "Search") }} // To avoid infinite loop
            window.store[{{ .RelPermalink }}] = {
                title:    {{ .Title }},
                content:  {{ .Plain }},
                html:     {{ .Content }},
                url:      {{ .RelPermalink }}
            };
        {{ end }}
    {{ end }}
</script>
<script type="text/javascript" src="{{ relref . "_index.md" }}js/search.js"></script>